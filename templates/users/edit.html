{% extends "users/layout.html" %}

{% block title %}Новый пользователь{% endblock %}

{% block content %}

<style>
  .error {
    color: red;
  }
  .success {
    color: lime;
  }
</style>

<h1>Новый пользователь</h1>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <ul class="flashes">
      {% for category, message in messages %}
        <li class="{{ category }}">{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<hr>
<form action="{{ url_for('users_patch', id=user.id) }}" method="post">
  <div>
    <label>
      Имя
      <input type="text" name="name" value="{{ user.name }}">
    </label>
    {% if errors['name'] %}
      <div>{{ errors['name'] }}</div>
    {% endif %}
  </div>
  <div>
    <label>
      Email
      <input type="email" required name="email" value="{{ user.email }}">
    </label>
    {% if errors['email'] %}
      <div>{{ errors['email'] }}</div>
    {% endif %}
    </div>
  <div>
    <button type="submit" title="Submit form">Обновить</button>
  </div>

  <p><a href="{{ url_for('users_get') }}">Назад к списку пользователей</a></p>
</form>
{% endblock %}
